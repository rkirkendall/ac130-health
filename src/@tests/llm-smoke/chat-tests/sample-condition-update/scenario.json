{
  "metadata": {
    "name": "sample-condition-update",
    "description": "Ensures a new hypertension diagnosis is recorded for the seeded dependent.",
    "model": "gpt-5.1",
    "temperature": 0.5,
    "model_base_url": "https://api.openai.com/v1",
    "max_turns": 6
  },
  "conversation": [
    {
      "role": "system",
      "content": "Use AC130 MCP to view and update health records."
    },
    {
      "role": "user",
      "content": "My dad went to his PCP this morning and was diagnosed with hypertension. Please update his existing record in AC130."
    }
  ],
  "expectations": {
    "actions": [
      {
        "order": 1,
        "tool": "list_resource",
        "arguments": {
          "resource_type": "condition",
          "filters": {
            "dependent_id": "DEPENDENT_DAD_1"
          }
        }
      },
      {
        "order": 2,
        "tool": "create_resource",
        "arguments": {
          "resource_type": "condition",
          "duplicate_check_confirmed": true,
          "data": {
            "dependent_id": "DEPENDENT_DAD_1",
            "name": "Hypertension",
            "status": "active"
          }
        },
        "required": true,
        "state_assertions": [
          {
            "collection": "conditions",
            "query": {
              "dependent_id": "DEPENDENT_DAD_1",
              "name": "Hypertension"
            },
            "match": {
              "status": "active",
              "name": "Hypertension"
            }
          }
        ]
      }
    ]
  },
  "seed": {
    "mongo_dump": "seed.json"
  }
}
